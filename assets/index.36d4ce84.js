import{c as _,a as h,r as y,u as c,i as S,b as g,d as E,p as v,h as u,R as L,e as P,T as A}from"./vendor.f9f2987e.js";const R=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function e(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerpolicy&&(r.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?r.credentials="include":t.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(t){if(t.ep)return;t.ep=!0;const r=e(t);fetch(t.href,r)}};R();const N="modulepreload",l={},O="/",a=function(n,e){return!e||e.length===0?n():Promise.all(e.map(o=>{if(o=`${O}${o}`,o in l)return;l[o]=!0;const t=o.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${r}`))return;const s=document.createElement("link");if(s.rel=t?"stylesheet":N,t||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),t)return new Promise((d,f)=>{s.addEventListener("load",d),s.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>n())},k=[{name:"index",path:"/",component:()=>a(()=>import("./index.f7bff58a.js"),["assets/index.f7bff58a.js","assets/index.567eb076.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/note.e6cafeda.js"]),props:!0,meta:{title:"Main Page"}},{name:"auth-login",path:"/auth/login",component:()=>a(()=>import("./login.6b424610.js"),["assets/login.6b424610.js","assets/login.30264a12.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/auth.0fc7c86a.js"]),props:!0,meta:{title:"[SN] Login"}},{name:"auth-profile",path:"/auth/profile",component:()=>a(()=>import("./profile.b9f6cf57.js"),["assets/profile.b9f6cf57.js","assets/profile.57a6868e.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/auth.0fc7c86a.js"]),props:!0,meta:{title:"[SN] Profile"}},{name:"auth-register",path:"/auth/register",component:()=>a(()=>import("./register.0d148d1f.js"),["assets/register.0d148d1f.js","assets/register.ee9a9b69.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/auth.0fc7c86a.js"]),props:!0,meta:{title:"[SN] Login"}},{name:"note-id",path:"/note/:id",component:()=>a(()=>import("./_id_.5b6d6499.js"),["assets/_id_.5b6d6499.js","assets/_id_.0cc6350e.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/note.e6cafeda.js"]),props:!0,meta:{title:"[SN] Note"}},{name:"note-create",path:"/note/create",component:()=>a(()=>import("./create.c4b5e516.js"),["assets/create.c4b5e516.js","assets/create.00fe6ae9.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/note.e6cafeda.js"]),props:!0,meta:{title:"[SN] Note"}},{name:"note-edit-id",path:"/note/edit/:id",component:()=>a(()=>import("./_id_.bc0c4167.js"),["assets/_id_.bc0c4167.js","assets/_id_.0d3bbc96.css","assets/vendor.f9f2987e.js","assets/route-block.b1cafca1.js","assets/note.e6cafeda.js"]),props:!0,meta:{title:"[SN] Note"}}];function T(){return _({history:h(),routes:k})}const p=Symbol();function b(){const i=c("access_token",""),n=c("access_token_timestamp",null),e=c("user",null),o=c("isLoggedIn",!1);return y({access_token:i,access_token_timestamp:n,isLoggedIn:o,user:e})}function w(){const i=S(p);if(!i)throw new Error("UserSession not properly injected in app");return i}function I(i){const n=g.create({baseURL:"https://notepad-secure-back.herokuapp.com/api/",headers:{"Content-Type":"application/json"}});return n.interceptors.request.use(async e=>{try{const o=i.access_token;return e.headers.common.Authorization=`Bearer ${o}`,e.params==null&&(e.params={}),e.params.t=new Date().getTime(),e}catch{}}),n.interceptors.response.use(e=>e.data&&e.data.success===!1?Promise.reject(e):Promise.resolve(e),e=>{if(console.log(e),e.request&&e.request.status===500)return Promise.reject(e);if(!(e.request&&e.request.status===401))return Promise.reject(e)}),n}const m=b(),V=I(m);async function D({enhanceApp:i}){const n=T(),e=m,o=E({setup(){return v(p,e),()=>[u(L,null,{default:({Component:r})=>{const s=P(r);return[u(A,{name:"fade-slow",mode:"out-in"},{default:()=>[u(s)]})]}})]}});return o.use(n),o}D({}).then(i=>i.mount("#app"));export{V as a,m as s,w as u};
